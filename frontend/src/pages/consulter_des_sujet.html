<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consulter description sujet </title>

  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/dashboard_etudiant.css">

  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background-color: #E6E6FA;
    }

 .main-content {
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  padding-top: 700px;
  padding-left: 100px;
}

    .form-container {
  background-color: white;
  padding: 30px;
  border-radius: 15px;
  width: 700px;
  margin: 40px auto 0 400px; /* من الأعلى والأسفل واليسار */
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
}


    h1 {
      color: #8a2be2;
      margin-bottom: 30px;
    }

    .display-group {
      margin-bottom: 25px;
    }

    .display-group label {
      font-weight: bold;
      color: #6b1fc2;
      margin-bottom: 5px;
      display: block;
      font-size: 16px;
    }

    .display-group .text-content {
      background-color: white;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      color: #333;
    }
  </style>
</head>

<body>
  <div class="sidebar">
    <h2 class="titre">Gestion projet</h2>
    <nav>
      <ul>
        <li><a href="dashb_etudiant.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li class="active"><a href="consulter_des_sujet.html"><i class="fas fa-book"></i> Consulter la description des sujets</a></li>
        <li><a href="consulter_cas.html"><i class="fas fa-eye"></i> Consulter les cas</a></li>
        <li><a href="consulter_rapport.html"><i class="fas fa-file-alt"></i> Consulter rapport</a></li>
        <li><a href="deposer_rapport.html"><i class="fas fa-upload"></i> Déposer un rapport</a></li>
        <li><a href="consulter_evalu.html"><i class="fas fa-star"></i> Consulter l'évaluation</a></li>
        <li><a href="poser_question.html"><i class="fas fa-question"></i> Poser des questions</a></li>
        <li><a href="profil_etud.html"><i class="fas fa-user"></i> Profil</a></li>
      </ul>
    </nav>
  </div>

  <div class="form-container">
    <h1>Description du Sujet</h1>

    <div class="display-group">
      <label>Nom du sujet :</label>
      <div class="text-content" id="titreSujet"></div>
    </div>

    <div class="display-group">
      <label>Description :</label>
      <div class="text-content" id="descriptionSujet"></div>
    </div>
    
    <div class="display-group">
      <label>Références :</label>
      <div class="text-content" id="referenceSujet"></div>
    </div>
    
    <div class="display-group">
      <label>Prérequis :</label>
      <div class="text-content" id="prerequisSujet"></div>
    </div>
  </div>
       <script src="../js/simulate_login.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const idEtudiant = localStorage.getItem('idEtudiant');
      
      if (!idEtudiant) {
        console.error('ID étudiant non trouvé');
        alert('Veuillez vous connecter');
        window.location.href = 'login.html';
        return;
      }

      fetch(`http://localhost:3000/api/sujet/etudiant/${idEtudiant}`)
        .then(response => {
          if (!response.ok) {
            throw new Error(`Erreur ${response.status}: ${response.statusText}`);
          }
          return response.json();
        })
        .then(data => {
          console.log('Données reçues:', data);
          
          document.getElementById('titreSujet').textContent = data.titre || 'Non spécifié';
          document.getElementById('descriptionSujet').textContent = data.description || 'Non spécifié';
          
          // Afficher les références
          const refElement = document.getElementById('referenceSujet');
          if (data.references && data.references.length > 0) {
            refElement.textContent = data.references.join('\n');
          } else {
            refElement.textContent = 'Aucune référence disponible';
          }
          
          // Afficher les prérequis
          const preElement = document.getElementById('prerequisSujet');
          if (data.prerequis && data.prerequis.length > 0) {
            preElement.textContent = data.prerequis.join('\n');
          } else {
            preElement.textContent = 'Aucun prérequis disponible';
          }
        })
        .catch(error => {
          console.error('Erreur:', error);
          alert(`Erreur lors du chargement des données: ${error.message}`);
          
          document.getElementById('titreSujet').textContent = 'Erreur de chargement';
          document.getElementById('descriptionSujet').textContent = error.message;
          document.getElementById('referenceSujet').textContent = 'Non disponible';
          document.getElementById('prerequisSujet').textContent = 'Non disponible';
        });
    });
  </script>
</body>
</html>