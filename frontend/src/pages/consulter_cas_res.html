<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulter ses cas</title>

  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../css/consulter_cas.css" />
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2 class="titre">Gestion projet</h2>
    <nav>
      <ul>
        <li ><a href="dashb_etud_res.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
        <li><a href="consulter_r_tache.html" id="consulterTache"><i class="fas fa-tasks"></i> Consulter les rapports des tâches</a></li>
        <li><a href="deposer_r_e.html"><i class="fas fa-upload"></i> Déposer rapport d'étape</a></li>
        <li><a href="consulter_des_sujet_res.html"><i class="fas fa-book"></i> Consulter la description des sujets</a></li>
        <li class="active"><a href="consulter_cas_res.html"><i class="fas fa-eye"></i> Consulter les cas</a></li>
        <li><a href="consulter_rapport_res.html"><i class="fas fa-file-alt"></i> Consulter rapport</a></li>
        <li><a href="deposer_rapport_res.html"><i class="fas fa-upload"></i> Déposer un rapport</a></li>
        <li><a href="consulter_evalu_res.html"><i class="fas fa-star"></i> Consulter l'évaluation</a></li>
        <li><a href="poser_question_res.html"><i class="fas fa-question"></i> Poser des questions</a></li>
        <li><a href="profil_e_r.html" id="profil"><i class="fas fa-user"></i> Profil</a></li>
      </ul>
    </nav>
  </div>

  <main class="content" style="margin-left: 250px; padding: 40px 0; min-height: 100vh; display: flex; justify-content: center; align-items: flex-start;">
    <div class="container" style="max-width: 700px; width: 100%;">
      <h2 class="text-center mb-4" style="color: #8A2BE2;">Mes cas :</h2>
      <div class="table-responsive">
        <table class="table table-bordered table-hover text-center align-middle">
          <thead style="background-color: #8A2BE2; color: white;">
            <tr>
              <th>Nom du cas</th>
              <th>Acteur</th>
            </tr>
          </thead>
          <tbody id="cas-table-body">
            <!-- Contenu dynamique -->
          </tbody>
        </table>
      </div>
    </div>
  </main>
 <script>
document.addEventListener("DOMContentLoaded", () => {
  let idEtudiant = localStorage.getItem('idEtudiant');
  
  if (!idEtudiant) {
    console.log("L'ID de l'étudiant n'est pas défini, je vais le définir.");
    localStorage.setItem('idEtudiant', '12');  // تعيين id هنا مباشرة إذا لم يكن موجودًا
    idEtudiant = '12'; // تعيين قيمة مؤقتة
  }

  fetch(`http://localhost:3000/api/cas/${idEtudiant}`)
    .then(response => response.json())
    .then(data => {
      const tbody = document.getElementById("cas-table-body");
      tbody.innerHTML = "";

      data.forEach(cas => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${cas.cas}</td>
          <td>${cas.acteur}</td>
        `;
        tbody.appendChild(row);
      });
    })
    .catch(error => {
      console.error("Erreur lors de la récupération des cas:", error);
    });
});

</script>

</body>
</html>
